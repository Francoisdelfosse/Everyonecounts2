<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Real-time World Population Counter</title>
<style>
  body { font-family: sans-serif; background: #f5f5f5; color: #111; padding: 20px; }
  .counter { font-size: 2em; font-weight: bold; margin-bottom: 10px; }
  .controls button { margin: 5px; }
</style>
</head>
<body>
<h1>Real-time World Population Counter</h1>
<div class="counter" id="populationDisplay"></div>
<div class="controls">
  <label>Birth rate (per 1000/year): <input type="number" step="0.1" id="birthRate" value="17.2"></label><br>
  <label>Death rate (per 1000/year): <input type="number" step="0.1" id="deathRate" value="8.8"></label><br>
  <label>Climate death increase (%/year): <input type="number" step="0.01" id="climateRate" value="0.2"></label><br>
  <button id="pandemicBtn">Trigger Pandemic</button>
  <button id="disasterBtn">Trigger Disaster</button>
  <button id="resetBtn">Reset</button>
</div>
<script>
let population = 8238000000;
let birthRate = 17.2; // per 1000/year
let deathRate = 8.8; // per 1000/year
let climateRate = 0.002; // 0.2%/year
let pandemicActive = false;
let pandemicMultiplier = 1.75;
let pandemicEnd = 0;
let disasterPending = false;
let disasterSeverity = 0.3; // 30% immediate loss
const secondsPerYear = 365.25 * 24 * 3600;

function perSecondRate(ratePerThousand) {
  return (ratePerThousand / 1000) / secondsPerYear;
}

let birthPerSec = perSecondRate(birthRate);
let deathPerSec = perSecondRate(deathRate);

function updateRates() {
  birthRate = parseFloat(document.getElementById('birthRate').value);
  deathRate = parseFloat(document.getElementById('deathRate').value);
  climateRate = parseFloat(document.getElementById('climateRate').value) / 100;
  birthPerSec = perSecondRate(birthRate);
  deathPerSec = perSecondRate(deathRate);
}

document.getElementById('pandemicBtn').onclick = () => {
  pandemicActive = true;
  pandemicEnd = Date.now() + 10000; // 10 seconds demo
};
document.getElementById('disasterBtn').onclick = () => {
  disasterPending = true;
};
document.getElementById('resetBtn').onclick = () => {
  population = 8238000000;
};

function step() {
  updateRates();
  const now = Date.now();
  const dt = 1; // 1 second steps
  const climateMultiplier = 1 + climateRate * ((now - startTime)/(1000 * secondsPerYear));
  const pandemicMult = (pandemicActive && now < pandemicEnd) ? pandemicMultiplier : 1;
  if (pandemicActive && now >= pandemicEnd) pandemicActive = false;
  const births = population * birthPerSec * dt;
  const deaths = population * deathPerSec * climateMultiplier * pandemicMult * dt;
  population += births - deaths;
  if (disasterPending) {
    population -= population * disasterSeverity;
    disasterPending = false;
  }
  document.getElementById('populationDisplay').textContent = population.toLocaleString();
}

const startTime = Date.now();
setInterval(step, 1000);
</script>
</body>
</html>
